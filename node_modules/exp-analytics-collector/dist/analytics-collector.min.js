!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("expAnalyticsCollector",[],e):"object"==typeof exports?exports.expAnalyticsCollector=e():t.expAnalyticsCollector=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(3)},,,function(t,e,n){"use strict";var r=n(4);t.exports=new r["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),u=r(i),o=1,g=function(){},c=function(){function t(){a(this,t)}return s(t,[{key:"init",value:function(t,e,n,r,a){var s=arguments.length<=5||void 0===arguments[5]?u["default"]:arguments[5],i=arguments.length<=6||void 0===arguments[6]?window.ga:arguments[6];return this.url=t+"/1.0/analyticEvent",this.appName=e,this.gaId=n,this.mfgId=r,this.campaignId=a,this.rootEventId="",this.AnalyticEvent=s,this.ga=i,this.sendToGA("create",this.gaId,"auto"),this}},{key:"sendEvent",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?o:arguments[2],r=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],a=arguments.length<=4||void 0===arguments[4]?this.rootEventId:arguments[4],s=arguments.length<=5||void 0===arguments[5]?!1:arguments[5],i=arguments.length<=6||void 0===arguments[6]?g:arguments[6],u=arguments.length<=7||void 0===arguments[7]?g:arguments[7];return this.doSend(this.createAnalyticsEvent(t,e,n,r,a),s,i,u)}},{key:"createAnalyticsEvent",value:function(t,e,n,r,a){return new this.AnalyticEvent(t,e,this.appName,n,this.guid(),r,a).toJSON()}},{key:"doSend",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?g:arguments[2],r=arguments.length<=3||void 0===arguments[3]?g:arguments[3];return t.url=window.location.href,t.userAgent=navigator.userAgent,t.referrer=document.referrer,t.mfgId=t.mfgId||this.mfgId,t.campaignId=t.campaignId||this.campaignId,e&&this.sendToGA("send","event",this.appName,t.action,t.label||t.url,{hitCallback:n}),this.doPostRequest(t,n,r),t}},{key:"pv",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?g:arguments[1],n=arguments.length<=2||void 0===arguments[2]?g:arguments[2];return this.sendToGA("send","pageview"),this.rootEventId=this.sendEvent("PAGEVIEW",t,1,void 0,void 0,!1,e,n).eventId,this.rootEventId}},{key:"guid",value:function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}},{key:"sendToGA",value:function(){this.ga&&this.gaId&&this.ga.apply(null,arguments)}},{key:"doPostRequest",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?g:arguments[1],n=arguments.length<=2||void 0===arguments[2]?g:arguments[2],r=void 0,a=JSON.stringify(t);if(window.XMLHttpRequest)r=new window.XMLHttpRequest;else{if(!window.ActiveXObject)throw new Error("Cannot make request due to the browser being old");r=new window.ActiveXObject("MSXML2.XMLHTTP.3.0")}r.open("POST",this.url),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type","application/json; charset=utf-8"),r.send(a),r.onreadystatechange=function(){if(4===r.readyState)if(r.status<300)try{e.call(this,JSON.parse(r.responseText))}catch(t){n.call(this,t)}else n.call(this,r.responseText||r.statusText)}}}]),t}();e["default"]=c},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(e,r,a,s,i,u,o){n(this,t),this.action=e,this.data=r,this.appName=a,this.version=s,this.eventId=i,this.parentEventId=o,this.userAgent="",this.url="",this.mfgId="",this.campaignId="",this.referrer="",u&&(Array.isArray(u)?this.consumers=u:this.consumers=[u])}return r(t,[{key:"toJSON",value:function(){var t=this,e={};return Object.keys(this).forEach(function(n){e[n]=t[n]}),e}}]),t}();e["default"]=a}])});
//# sourceMappingURL=analytics-collector.min.js.map